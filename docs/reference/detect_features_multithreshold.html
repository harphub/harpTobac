<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>harp wrapper for the tobac feature_detection_multithreshold() function — detect_features_multithreshold • harpTobac</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="harp wrapper for the tobac feature_detection_multithreshold() function — detect_features_multithreshold"><meta property="og:description" content="This function is used to detect features on a field based on contiguous
regions. The regions are above / below a threshold depending on the value of
the target argument. Note that 3d features are not yet implemented for this
wrapper."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">harpTobac</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/tracking_model_OLR.html">Track OLR features</a>
    </li>
    <li>
      <a href="../articles/tracking_seviri_brightness_temp.html">Track satellite brightness temperature</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/harphub/harpTobac/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>harp wrapper for the tobac <code>feature_detection_multithreshold()</code> function</h1>
    <small class="dont-index">Source: <a href="https://github.com/harphub/harpTobac/blob/HEAD/R/bindings.R" class="external-link"><code>R/bindings.R</code></a></small>
    <div class="hidden name"><code>detect_features_multithreshold.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function is used to detect features on a field based on contiguous
regions. The regions are above / below a threshold depending on the value of
the <code>target</code> argument. Note that 3d features are not yet implemented for this
wrapper.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">detect_features_multithreshold</span><span class="op">(</span></span>
<span>  <span class="va">field_data</span>,</span>
<span>  <span class="va">thresholds</span>,</span>
<span>  data_col <span class="op">=</span> <span class="st">"gridded_data"</span>,</span>
<span>  dttm_col <span class="op">=</span> <span class="st">"valid_dttm"</span>,</span>
<span>  target <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"max"</span>, <span class="st">"min"</span><span class="op">)</span>,</span>
<span>  position_threshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"centre"</span>, <span class="st">"extreme"</span>, <span class="st">"weighted_diff"</span>, <span class="st">"weighted_abs"</span><span class="op">)</span>,</span>
<span>  sigma_threshold <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  n_erosion_threshold <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  n_min_threshold <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  min_distance <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  feature_number_start <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  pbc_flag <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none"</span>, <span class="st">"h_dim1"</span>, <span class="st">"h_dim2"</span>, <span class="st">"both"</span><span class="op">)</span>,</span>
<span>  vertical_coord <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vertical_axis <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  detect_subset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  wavelength_filtering <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dz <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strict_thresholding <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>field_data</dt>
<dd><p>A <code>harp_grid_df</code> data frame such as one returned by the
<em>harpIO</em> functions
<code><a href="https://rdrr.io/pkg/harpIO/man/read_grid.html" class="external-link">harpIO::read_grid()</a></code> with <code>data_frame = TRUE</code>, <code><a href="https://rdrr.io/pkg/harpIO/man/read_forecast.html" class="external-link">harpIO::read_forecast()</a></code>,
or <code><a href="https://rdrr.io/pkg/harpIO/man/read_analysis.html" class="external-link">harpIO::read_analysis()</a></code>.</p></dd>


<dt>thresholds</dt>
<dd><p>Threshold values used to select target regions to track.
The feature detection is inclusive of the threshold value(s), i.e. values
greater/less than or equal are included in the target region. The <code>target</code>
argument controls whether the detection is based on less than or greater
than the threshold(s).</p></dd>


<dt>data_col</dt>
<dd><p>&lt;<code>tidy-select</code>&gt; The column in
<code>field_data</code> containing the fields to be used to detect features in. Should
be a <code>&lt;geolist&gt;</code> column. If the named column is not found in <code>field_data</code>,
but <code>field_data</code> contains 1 <code>&lt;geolist&gt;</code> column, that <code>&lt;geolist&gt;</code> column is
used.</p></dd>


<dt>dttm_col</dt>
<dd><p>&lt;<code>tidy-select</code>&gt; The column in
<code>field_data</code> containing the date-times to be used for the time dimension.
Can be numeric with units in Unix time (seconds since 1970-01-01 00:00:00),
or a <code>&lt;POSIXt&gt;</code>column. If the named column is not found in <code>field_data</code>,
but <code>field_data</code> contains 1 <code>&lt;POSIXt&gt;</code> column, that <code>&lt;POSIXt&gt;</code> column is
used.</p></dd>


<dt>target</dt>
<dd><p>Flag to determine if tracking is targeting minima or maxima in
the data. Should be "max" or "min". Default is "max".</p></dd>


<dt>position_threshold</dt>
<dd><p>Flag to choose the method to be used for the
setting the position of the tracked feature. Can be one of "centre",
"extreme", or "weighted_diff". Default is ‘centre’, though "weighted_diff"
is often preferable for atmospheric features.</p></dd>


<dt>sigma_threshold</dt>
<dd><p>Standard deviation for initial filtering step. Default
is 0.5.</p></dd>


<dt>n_erosion_threshold</dt>
<dd><p>Number of pixels by which to erode the identified
features. Default is 0.</p></dd>


<dt>n_min_threshold</dt>
<dd><p>Minimum number of identified contiguous pixels for a
feature to be detected. Default is 0.</p></dd>


<dt>min_distance</dt>
<dd><p>Minimum distance between detected features (in metres).
Default is 0.</p></dd>


<dt>feature_number_start</dt>
<dd><p>Feature id to start with. Default is 1.</p></dd>


<dt>pbc_flag</dt>
<dd><p>Sets whether to use periodic boundaries, and if so in which
directions. "none" means that we do not have periodic boundaries "hdim_1"
means that we are periodic along hdim1, "hdim_2" means that we are periodic
along hdim2 and "both" means that we are periodic along both horizontal
dimensions</p></dd>


<dt>vertical_coord</dt>
<dd><p>Name of the vertical coordinate. If <code>NULL</code>, tries to
auto-detect. It looks for the coordinate or the dimension name
corresponding to the string.</p></dd>


<dt>vertical_axis</dt>
<dd><p>The vertical axis number of the data. If <code>NULL</code>, uses
<code>vertical_coord</code> to determine axis. This must be &gt;=0.</p></dd>


<dt>detect_subset</dt>
<dd><p>Whether to run feature detection on only a subset of the
data. If this is not <code>NULL</code>, it should be a named list and it will subset
the grid that we run feature detection on to the range specified for each
axis specified. The format of this list is: <code>list(axis-number = c(start, end))</code>, where axis-number is the number of the axis to subset, start is
inclusive, and end is exclusive. For example, if your data are oriented as
(time, z, y, x) and you want to only detect on values between z levels 10
and 29, you would set: <code>list("1" = c(10, 30))</code>. <strong>Note that this is not
tested.</strong></p></dd>


<dt>wavelength_filtering</dt>
<dd><p>Minimum and maximum wavelength for horizontal
spectral filtering in metres as a 2 element vector. Default is <code>NULL</code>.</p></dd>


<dt>dz</dt>
<dd><p>Constant vertical grid spacing (metres). If not specified and
the input is 3D, this function requires that altitude is available in the
features input. If you specify a value here, this function assumes that it
is the constant z spacing between points, even if <code>z_coordinate_name</code> is
specified.</p></dd>


<dt>strict_thresholding</dt>
<dd><p>If <code>TRUE</code>, a feature can only be detected if all
previous thresholds have been met. Default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A data frame of detected features.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Andrew Singleton, Juan-Jesus Gonzalez.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

